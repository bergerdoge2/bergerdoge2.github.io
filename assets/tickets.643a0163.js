var L=Object.defineProperty;var V=(s,e,o)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var y=(s,e,o)=>(V(s,typeof e!="symbol"?e+"":e,o),o);import{_ as A}from"./Card.vue_vue_type_script_setup_true_lang.b14e854b.js";import{_ as P}from"./NumberGroup.vue_vue_type_script_setup_true_lang.6515335c.js";import{_ as F}from"./MainButton.vue_vue_type_script_setup_true_lang.c9e59a40.js";import{c as C,s as S}from"./api.e478c08c.js";import{t as N,f as W}from"./numbers.03942671.js";import{c as Y,b as I}from"./jackpot.49915412.js";import{B as w}from"./ethers.0cd5324d.js";import{aw as T}from"./ethers.08671b99.js";import{v as D,i as M,f as B,r as x,h as r,j as c,k as i,J as b,u as l,z as u,A as p,N as _,E as z,C as G,K as J,F as K,P as Z}from"./index.bc39844c.js";import{_ as q,a as H}from"./Loading.bb7674c3.js";import{u as O}from"./wallet.17284c08.js";import{g as Q}from"./wallet.08fa9bdc.js";import"./loading.d775a9f8.js";import"./error.551bd5c0.js";import"./networks.9d63c03e.js";import"./PowerBall__factory.a972b225.js";import"./provider.db0932ca.js";import"./index.f4be9492.js";import"./index.46b289ad.js";import"./wallet.b29e5d51.js";import"./LoadingIcon.cbc2d2fd.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./pinia.98a3f9b4.js";class t{constructor(e){y(this,"fixedNumber");y(this,"bigNumber");this.value=e}static from(e){return new t(e)}add(e){return t.from(this.toFixedNumber().addUnsafe(t.from(e).toFixedNumber()))}sub(e){return t.from(this.toFixedNumber().subUnsafe(t.from(e).toFixedNumber()))}mul(e){return t.from(this.toFixedNumber().mulUnsafe(t.from(e).toFixedNumber()))}div(e){return t.from(this.toFixedNumber().divUnsafe(t.from(e).toFixedNumber()))}lt(e){return this.fixedToBigNumber().lt(t.from(e).fixedToBigNumber())}gt(e){return this.fixedToBigNumber().gt(t.from(e).fixedToBigNumber())}lte(e){return this.fixedToBigNumber().lte(t.from(e).fixedToBigNumber())}gte(e){return this.fixedToBigNumber().gte(t.from(e).fixedToBigNumber())}fixedToBigNumber(){return this.toBigNumber(this.toFixedNumber().format._multiplier)}toWei(e){return this.toBigNumber(w.from(10).pow(e.toString()))}toFixedNumber(){if(!this.fixedNumber){let e=this.value.toString();e.includes(".")||(e+=".0"),this.fixedNumber=T.from(e)}return this.fixedNumber}toBigNumber(e){return e?w.from(N(this.toFixedNumber().mulUnsafe(T.from(e.toString())).toString())):(this.bigNumber||(this.bigNumber=w.from(N(this.value))),this.bigNumber)}toNumber(){return Number.parseFloat(this.toString())}toString(){return N(this.value.toString())}}const R={class:"inline-flex w-full flex-col rounded-lg border border-red-500 shadow-md sm:w-auto"},X={class:"flex items-center justify-between border-b border-dashed border-red-500 px-2 py-1"},ee={class:"text-xs"},te={class:"text-gray-400"},se={class:"font-medium"},ie={key:0,class:"text-xs font-bold"},re={key:1,class:"text-xs font-bold text-gray-500"},oe={class:"flex flex-col items-center justify-center p-4"},ae={class:"mt-4 text-xs font-medium"},ne={class:"text-brown-600 font-bold"},me={key:0},le={key:1},ce={class:"border-t border-dashed border-red-500 px-2 py-1"},ue={class:"space-x-1 text-center text-xs"},de=i("span",{class:"font-medium"},"Buy Date:",-1),fe={class:"font-bold"},be=D({__name:"Ticket",props:{item:null},setup(s){const e=s,o=M("ball"),n=B(()=>{var a;return!((a=e.item.drawingNumbers.numbers)!=null&&a.length)}),m=B(()=>!n.value&&(!e.item.earned||t.from(e.item.earned).lte(0))),d=x(!1);async function f(){await C(async()=>{await S(Y,e.item.id).then(()=>d.value=!0)})}const h=B(()=>e.item.isClaimed||d.value);return(a,$)=>{const g=F,v=P;return r(),c("div",R,[i("div",X,[i("div",ee,[i("p",te,"#"+b(s.item.id),1),i("p",se,b(new Date(s.item.drawingDate).toLocaleDateString()),1)]),i("div",null,[l(n)?(r(),c("span",ie,"Waiting...")):l(m)?(r(),c("span",re,"You lose!")):(r(),u(g,{key:2,disabled:l(h),"spacing-class":"px-2 py-0.5 text-xs rounded-full",onClick:f},{default:p(()=>[_(b(l(h)?"Claimed":"Claim"),1)]),_:1},8,["disabled"]))])]),i("div",oe,[z(v,{active:s.item.numbers.ball,"always-show-active":!!l(o),filled:s.item.drawingNumbers.numbers,numbers:s.item.numbers.numbers},null,8,["active","always-show-active","filled","numbers"]),i("p",ae,[_(" Earned: "),i("span",ne,[l(n)?(r(),c("span",me,"---")):(r(),c("span",le,b(l(W)(s.item.earned||0))+" BUSD",1))])])]),i("div",ce,[i("p",ue,[de,i("span",fe,b(new Date(s.item.buyDate).toLocaleString()),1)])])])}}}),xe={key:2,class:"flex flex-col items-center justify-center space-y-4"},he={class:"-mt-4 -mr-4 flex flex-wrap items-center justify-center"},Ie=D({__name:"tickets",setup(s){const e=O(),o=x([]),n=x(!0),m=x([]);async function d(){!e.address||(n.value=!0,m.value=[],o.value=await Q(e.address),m.value=[...o.value].filter(a=>!a.isClaimed&&t.from((a==null?void 0:a.earned)||0).gt(0)).map(a=>Number(a.id)),n.value=!1)}G(d);const f=x(!1);async function h(){m.value.length!==0&&(f.value=!0,await C(async()=>{await S(I,m.value).finally(()=>{d(),f.value=!1})}))}return(a,$)=>{const g=q,v=H,j=F,U=be,E=A;return r(),u(E,{title:"Your Tickets"},{default:p(()=>[n.value?(r(),u(g,{key:0})):o.value.length<=0?(r(),u(v,{key:1},{default:p(()=>[_("You don't have any tickets!")]),_:1})):(r(),c("div",xe,[m.value.length>1?(r(),u(j,{key:0,disabled:f.value,onClick:h},{default:p(()=>[_("Claim All")]),_:1},8,["disabled"])):J("",!0),i("div",he,[(r(!0),c(K,null,Z(o.value,k=>(r(),u(U,{key:k.id,item:k,class:"mt-4 mr-4"},null,8,["item"]))),128))])]))]),_:1})}}});export{Ie as default};
