import{u as m}from"./wallet.17284c08.js";import{d as f,u as v}from"./index.f4be9492.js";import{u as c}from"./error.551bd5c0.js";import{u as p}from"./wallet.b29e5d51.js";import{r as l}from"./index.bc39844c.js";function w({mustBeMetaMask:e=!1,silent:o=!1,timeout:r=3e3}={}){t();let n=!1;return new Promise(u=>{window.ethereum?a():(window.addEventListener("ethereum#initialized",a,{once:!0}),setTimeout(()=>{a()},r));function a(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",a);const{ethereum:i}=window;i&&(!e||i.isMetaMask)?u(i):(!o&&console.error("@metamask/detect-provider:",e&&i?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum."),u(null))}});function t(){if(typeof e!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof o!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof r!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var h=w;const d="Click on Metamask icon and confirm connect! After successfully connected, you can close this popup.",s=l(),x=()=>s;async function E(){if(!f)return s.value=void 0;const e=await h();return e?s.value=e:(p().value=!0,s.value=void 0)}async function C(){const e=m(),o=await E(),r=v("connected",!1),n=l();if(!!o){r.value&&(n.value=setTimeout(()=>{c().value=d},5e3));try{const t=await o.request({method:"eth_requestAccounts"});t.length>0&&(e.address=t[0]),r.value=!!e.address}catch(t){if(t.code==-32002)return c().value=d;throw t}finally{clearTimeout(n.value)}}}export{C as a,x as b,E as u};
